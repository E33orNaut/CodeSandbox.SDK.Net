<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime.CompilerServices.Unsafe" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration>﻿# Changelog

All notable changes to this project will be documented in this file.

## [0.0.10] - Initial Release
### Added
- Initial release of the CodeSandbox.SDK.Net package.

## [0.0.7]
### Added
- Logger implementation with support for multiple log levels (`Trace`, `Info`, `Success`, `Warning`, `Error`).

## [0.0.6]
### Added
- Completed and integrated APIClient for unified endpoint communication.

## [0.0.5]
### Added
- CancellationToken support in all async operations for cooperative cancellation.

## [0.0.4]
### Added
- Centralized error handling and exception wrapping for API calls.

## [0.0.3]
### Added
- Implemented core services for FS, Port, and Git API integration.

## [0.0.2]
### Added
- Interfaces for all service classes to enable mocking and testability.

## [0.0.1]
### Added
- All OpenAPI-based models and types for CodeSandbox API.

## [0.0.0]
### Added
- Initial code structure and project scaffolding.
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{90E9C072-DE0D-4752-8EC6-FF01BD91A4EE}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>CodeSandbox.SDK.Net</RootNamespace>
    <AssemblyName>CodeSandbox.SDK.Net</AssemblyName>
    <TargetFrameworkVersion>v4.7.2</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
    <Deterministic>true</Deterministic>
    <!-- NuGet package metadata -->
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    <PackageId>CodeSandbox.SDK.Net</PackageId>
    <Version>0.0.10</Version>
    <Authors>E33orNaut</Authors>
    <Description>.NET SDK for CodeSandbox API</Description>
    <PackageLicenseFile>LICENSE.md</PackageLicenseFile>
    <PackageProjectUrl>https://github.com/E33orNaut/CodeSandbox.SDK.Net</PackageProjectUrl>
    <RepositoryUrl>https://github.com/E33orNaut/CodeSandbox.SDK.Net</RepositoryUrl>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <DocumentationFile>bin\Release\CodeSandbox.SDK.Net.xml</DocumentationFile>
    <CodeAnalysisRuleSet>MixedMinimumRules.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="Microsoft.Bcl.AsyncInterfaces, Version=9.0.0.5, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\Microsoft.Bcl.AsyncInterfaces.9.0.5\lib\net462\Microsoft.Bcl.AsyncInterfaces.dll</HintPath>
    </Reference>
    <Reference Include="Newtonsoft.Json, Version=13.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed, processorArchitecture=MSIL">
      <HintPath>..\packages\Newtonsoft.Json.13.0.3\lib\net45\Newtonsoft.Json.dll</HintPath>
    </Reference>
    <Reference Include="System" />
    <Reference Include="System.Buffers, Version=4.0.3.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Buffers.4.5.1\lib\net461\System.Buffers.dll</HintPath>
    </Reference>
    <Reference Include="System.Core" />
    <Reference Include="System.IO.Pipelines, Version=9.0.0.5, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.IO.Pipelines.9.0.5\lib\net462\System.IO.Pipelines.dll</HintPath>
    </Reference>
    <Reference Include="System.Memory, Version=4.0.1.2, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Memory.4.5.5\lib\net461\System.Memory.dll</HintPath>
    </Reference>
    <Reference Include="System.Numerics" />
    <Reference Include="System.Numerics.Vectors, Version=4.1.4.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Numerics.Vectors.4.5.0\lib\net46\System.Numerics.Vectors.dll</HintPath>
    </Reference>
    <Reference Include="System.Runtime.CompilerServices.Unsafe, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Runtime.CompilerServices.Unsafe.6.0.0\lib\net461\System.Runtime.CompilerServices.Unsafe.dll</HintPath>
    </Reference>
    <Reference Include="System.Text.Encodings.Web, Version=9.0.0.5, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Text.Encodings.Web.9.0.5\lib\net462\System.Text.Encodings.Web.dll</HintPath>
    </Reference>
    <Reference Include="System.Text.Json, Version=9.0.0.5, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Text.Json.9.0.5\lib\net462\System.Text.Json.dll</HintPath>
    </Reference>
    <Reference Include="System.Threading.Tasks.Extensions, Version=4.2.0.1, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.Threading.Tasks.Extensions.4.5.4\lib\net461\System.Threading.Tasks.Extensions.dll</HintPath>
    </Reference>
    <Reference Include="System.ValueTuple, Version=4.0.3.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51, processorArchitecture=MSIL">
      <HintPath>..\packages\System.ValueTuple.4.5.0\lib\net47\System.ValueTuple.dll</HintPath>
    </Reference>
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Interfaces\IContainerService.cs" />
    <Compile Include="Interfaces\IGitService.cs" />
    <Compile Include="Interfaces\IGitStatusService.cs" />
    <Compile Include="Interfaces\IPortService.cs" />
    <Compile Include="Interfaces\ISandboxFSService.cs" />
    <Compile Include="Interfaces\ISetupService.cs" />
    <Compile Include="Interfaces\IShellService.cs" />
    <Compile Include="Interfaces\ISystemService.cs" />
    <Compile Include="Interfaces\ITaskService.cs" />
    <Compile Include="Internal\APIClient.cs" />
    <Compile Include="CodeSandboxExamples.cs" />
    <Compile Include="Internal\Logger.cs" />
    <Compile Include="Models\ContainerSetupFeature.cs" />
    <Compile Include="Models\ContainerSetupRequest.cs" />
    <Compile Include="Models\ContainerSetupResponse.cs" />
    <Compile Include="Models\CpuInfo.cs" />
    <Compile Include="Models\CreateSetupTasksRequest.cs" />
    <Compile Include="Models\ErrorResponse.cs" />
    <Compile Include="Models\GitDiffStatusResult.cs" />
    <Compile Include="Models\MemoryInfo.cs" />
    <Compile Include="Models\OpenSandboxGitModels.cs" />
    <Compile Include="Models\Port.cs" />
    <Compile Include="Models\PortListResponse.cs" />
    <Compile Include="Models\PortListResult.cs" />
    <Compile Include="Models\ProtocallError.cs" />
    <Compile Include="Models\RemoteContentResult.cs" />
    <Compile Include="Models\CommitResult.cs" />
    <Compile Include="Models\DiscardResult.cs" />
    <Compile Include="Models\CommonError.cs" />
    <Compile Include="Models\ResultsWrappers.cs" />
    <Compile Include="Models\GitRemotes.cs" />
    <Compile Include="Models\GitTargetDiff.cs" />
    <Compile Include="Models\GitItem.cs" />
    <Compile Include="Models\GitBranchProperties.cs" />
    <Compile Include="Models\GitChangedFiles.cs" />
    <Compile Include="Models\GitCommit.cs" />
    <Compile Include="Models\GitStatus.cs" />
    <Compile Include="Models\SandboxFSModels.cs" />
    <Compile Include="Models\SetupProgress.cs" />
    <Compile Include="Models\ShellRenameRequest.cs" />
    <Compile Include="Models\ShellSetupStatus.cs" />
    <Compile Include="Models\Step.cs" />
    <Compile Include="Models\StorageInfo.cs" />
    <Compile Include="Models\SuccessResponse.cs" />
    <Compile Include="Models\SystemError.cs" />
    <Compile Include="Models\SystemMetricsStatus.cs" />
    <Compile Include="Models\TaskDefinitionDTO.cs" />
    <Compile Include="Models\TaskDTO.cs" />
    <Compile Include="Models\TaskError.cs" />
    <Compile Include="Models\TaskPreviewDTO.cs" />
    <Compile Include="Models\TransposeLinesResult.cs" />
    <Compile Include="Models\WriteFileRequest.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
    <Compile Include="Services\ContainerService.cs" />
    <Compile Include="Services\GitService.cs" />
    <Compile Include="Services\GitStatusService.cs" />
    <Compile Include="Services\PortService.cs" />
    <Compile Include="Services\SandboxFSService.cs" />
    <Compile Include="Services\SetupService.cs" />
    <Compile Include="Services\ShellService.cs" />
    <Compile Include="Services\SystemService.cs" />
    <Compile Include="Services\TaskService.cs" />
  </ItemGroup>
  <ItemGroup>
    <None Include="app.config" />
    <None Include="CHANGELOG.md" />
    <None Include="LICENSE.md" />
    <None Include="packages.config" />
    <None Include="README.md" />
  </ItemGroup>
  <ItemGroup />
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project><?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="Current" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectView>ShowAllFiles</ProjectView>
  </PropertyGroup>
</Project>﻿﻿MIT License

Copyright (c) 2025 Mark

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights  
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     
copies of the Software, and to permit persons to whom the Software is         
furnished to do so, subject to the following conditions:                       

The above copyright notice and this permission notice shall be included in    
all copies or substantial portions of the Software.                           

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, 
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN     
THE SOFTWARE.
MZ                @                                       	!L!This program cannot be run in DOS mode.
$       PE  L 5Mh                    F؈         @                            `  `                           ׈ L     X           Ȉ 0(        \؈                                            T؈                H           .text                            `.rsrc   X     
                @  @.reloc            ƈ             @  B                H     E JB 	   - q( ( q(                                    {  
*{  
*V(  
}  
}  
*  0 J     u  
;:   92   (  
{  
{  
o  
9   (  
{  
{  
o  
***     )u7 )UUZ(  
{  
o  
X )UUZ(  
{  
o	  
X*   0 n     r  p  %{  

 %q    :   &8     o
  
%{  
%q    :   &8     o
  
(  
*    (  
*^(  
  %}  *:(  
}  * :(  
}  * :(  
}  * n (  
   (  
  *{
  *"}
  *   {  *"}  *   {  *"}  *   {  *"}  *   {  *"}  *   {  *"}  *   {  *"}  *   {  *"}  *   {  *"}  *   (  (  
9"   (  (  
:   (  (  ( *{  * "}  *   (  (  
9"   (  (  
:   (  (  ( *{  * "}  *   (  (  
9"   (  (  
:   (  (  ( *{  * "}  *   (  (  
9"   (  (  
:   (  (  ( *{	  * "}	  *   0 '       (  
(  ("  (   (﻿<?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="Microsoft.Bcl.AsyncInterfaces" version="9.0.5" targetFramework="net472" />
  <package id="Newtonsoft.Json" version="13.0.3" targetFramework="net472" />
  <package id="System.Buffers" version="4.5.1" targetFramework="net472" />
  <package id="System.IO.Pipelines" version="9.0.5" targetFramework="net472" />
  <package id="System.Memory" version="4.5.5" targetFramework="net472" />
  <package id="System.Numerics.Vectors" version="4.5.0" targetFramework="net472" />
  <package id="System.Runtime.CompilerServices.Unsafe" version="6.0.0" targetFramework="net472" />
  <package id="System.Text.Encodings.Web" version="9.0.5" targetFramework="net472" />
  <package id="System.Text.Json" version="9.0.5" targetFramework="net472" />
  <package id="System.Threading.Tasks.Extensions" version="4.5.4" targetFramework="net472" />
  <package id="System.ValueTuple" version="4.5.0" targetFramework="net472" />
</packages>﻿# CodeSandbox.SDK.Net

**CodeSandbox.SDK.Net** is a .NET Standard / .NET Framework-compatible client library for interacting with the [CodeSandbox](https://codesandbox.io) API from C# and .NET-based applications. It provides a strongly-typed, developer-friendly interface to CodeSandbox's FS, Port, and Git APIs with full IntelliSense support and extensible configuration.

✅ Compatible with **.NET Framework 4.7+**, **.NET Core**, and **.NET 5+**

---

## Features

- ✅ Access CodeSandbox **File System (FS) API**
- ✅ Use **Git API** to manage sandbox versioning
- ✅ Interact with **Port API** for live container communication
- ✅ Async-friendly and testable services
- ✅ Built-in logging (`Trace`, `Info`, `Success`, `Warning`, `Error`) with `DEBUG` support
- ✅ Full support for CodeSandbox **OpenAPI spec**
- ✅ Moq-friendly for unit testing

---

## Installation

```bash
dotnet add package CodeSandbox.SDK.Net
```

---

## Quick Start

```csharp
using CodeSandbox.SDK;
using CodeSandbox.SDK.Services;

var client = new CodeSandboxClient("your-api-token");

// FS API Example
var files = await client.FS.ListFilesAsync("sandbox-id");

// Git API Example
var commits = await client.Git.ListCommitsAsync("sandbox-id");

// Port API Example
var result = await client.Port.SendMessageAsync("sandbox-id", 3000, "ping");
```

---

## API Coverage

| API        | Status | Notes                                        |
|------------|--------|----------------------------------------------|
| FS API     | ✅     | Read/write, directory, metadata, delete     |
| Port API   | ✅     | Send/receive messages, port introspection   |
| Git API    | ✅     | Commits, branches, diffs, file states       |
| Sandboxes  | 🚧     | Planned                                      |
| Deployments| 🚧     | Planned                                      |

---

## Logging

The SDK includes a configurable `LoggerService` with 5 log levels:

- `Trace`
- `Info`
- `Success`
- `Warning`
- `Error`

In `DEBUG` builds, verbose logging is enabled by default. You can inject your own logger implementation if needed.

```csharp
var logger = new CustomLogger(minimumLevel: LogLevel.Warning);
var client = new CodeSandboxClient("your-api-token", logger);
```

---

## Configuration Options

- Reuses `HttpClient` instances for better performance
- Supports `Newtonsoft.Json` (with `System.Text.Json` support planned)
- Parses and exposes detailed API errors in exceptions
- Retry logic for transient errors is on the roadmap

---

## Unit Testing

All services are testable via interfaces. For mocking:

```csharp
var mockGitService = new Mock<IGitService>();
mockGitService.Setup(s => s.ListCommitsAsync(It.IsAny<string>()))
              .ReturnsAsync(new List<Commit>());
```

> **Note**: Avoid using `It.IsAnyType` as a generic argument in Moq setups. Use concrete types instead.

---

## Requirements

- .NET Framework 4.7+
- .NET Core 3.1+
- .NET 5+

---

## Roadmap

- ✅ FS API  
- ✅ Port API  
- ✅ Git API  
- 🚧 Sandbox & Deployment API support  
- 🚧 System.Text.Json support  
- 🚧 Retry policies for transient errors  
- 🚧 NuGet package documentation and samples  

---

## Contributing

Contributions are welcome! Please open an issue or pull request.

---

## License

MIT License © 

---

## Acknowledgments

This SDK is inspired by the official CodeSandbox SDK (TypeScript) and built for .NET developers who want first-class integration with CodeSandbox from C# applications.
